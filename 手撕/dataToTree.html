<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      const arr = [
        { id: 1, pid: null, name: "总裁办" },
        { id: 2, pid: 1, name: "财务部" },
        { id: 3, pid: 2, name: "财务核算部" },
        { id: 4, pid: 2, name: "薪资管理部" },
        { id: 5, pid: 2, name: "技术部" },
        { id: 6, pid: 5, name: "Java研发部" },
        { id: 7, pid: 5, name: "前端研发部" },
        { id: 8, pid: 5, name: "大数据研发部" },
        { id: 9, pid: 6, name: "大数据" },
        { id: 10, pid: 3, name: "后端" },
        { id: 11, pid: 3, name: "运维" },
      ];
      // filter + forEach + 递归实现
      // function dataToTree(data, pid = null) {
      //   const tree = data.filter(item => item.pid === pid)

      //   tree.forEach(item => item.children = dataToTree(data, item.id))
      //   return tree
      // }

      // reduce + 递归实现
      // function dataToTree(data, pid = null) {
      //   return data.reduce((pre, cur) => {
      //     if (cur.pid === pid) {
      //       const children = dataToTree(data, cur.id);
      //       if (children.length) {
      //         cur.children = children;
      //       }
      //       pre.push(cur);
      //     }
      //     return pre;
      //   }, []);
      // }
      // const res = dataToTree(arr);

      // reduce + 递归实现树状结构转为一维数组
      // function treeToData(res) {
      //   return res.reduce((pre, cur) => {
      //     if(cur.children && cur.children.length) {
      //       const subList = treeToData(cur.children)
      //       delete cur.children
      //       pre = pre.concat(cur, ...subList)
      //     }else {
      //       pre.push(cur)
      //     }
      //     return pre
      //   }, [])
      // }

      // console.log(res);
      // var result = treeToData(res)
      // console.log(result);

      // function toRoutes(routeList) {
      //   const newRoutes = routeList.map((r) => {
      //     let routers = {
      //       path: r.path,
      //       title: r.title,
      //       component: () => import(`@/views/${r.name}`),
      //       name: r.name,
      //     };
      //     if (r.children) {
      //       routers.children = toRoutes(r.children);
      //     }
      //     return routers;
      //   });
      //   return newRoutes;
      // }
    </script>
  </body>
</html>
